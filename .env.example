# ============================================================================
# CV LOCATION CLASSIFIER - ENVIRONMENT CONFIGURATION
# ============================================================================

# ----------------------------------------------------------------------------
# AWS Configuration
# ----------------------------------------------------------------------------

# AWS Region (must match your deployment region)
AWS_REGION=us-east-1

# DynamoDB Table Name (must match template.yaml)
DYNAMODB_TABLE=cv-location-app

# AWS Credentials (only needed for local development with boto3)
# For Lambda deployment, IAM roles handle authentication automatically
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# ----------------------------------------------------------------------------
# Hugging Face Configuration
# ----------------------------------------------------------------------------

# Hugging Face API Token for LLaVA inference
# Get your token at: https://huggingface.co/settings/tokens
# Free tier: 1,000 requests/month
HUGGINGFACE_API_TOKEN=hf_your_token_here

# Hugging Face Model (default: LLaVA 1.5 7B)
HUGGINGFACE_MODEL=llava-hf/llava-1.5-7b-hf

# ----------------------------------------------------------------------------
# Authentication Configuration
# ----------------------------------------------------------------------------

# JWT Secret Key (use strong random string, at least 32 characters)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=change-this-to-a-strong-random-secret-key

# JWT Token Expiration (hours)
JWT_EXPIRATION_HOURS=24

# Bcrypt Password Hashing Rounds (12 is secure, higher = slower)
BCRYPT_ROUNDS=12

# ----------------------------------------------------------------------------
# Model Configuration
# ----------------------------------------------------------------------------

# Path to trained landmark detector model
LANDMARK_MODEL_PATH=data/checkpoints/landmark_detector_500classes_best.pth

# Path to landmark names mapping
LANDMARK_NAMES_PATH=data/checkpoints/landmark_names_100classes.json

# Path to landmarks database (for recommendations)
LANDMARKS_DATABASE_PATH=data/landmarks_unified.json

# Path to CLIP embeddings (for visual similarity)
CLIP_EMBEDDINGS_PATH=data/landmarks_clip_embeddings.npy
CLIP_MAPPING_PATH=data/landmarks_id_mapping.json

# Device for inference (cuda or cpu)
# Note: Lambda uses CPU, local development can use cuda if available
DEVICE=cpu

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------

# Allowed origins for CORS (comma-separated)
# For development: http://localhost:3000,http://localhost:5173
# For production: https://yourdomain.com
ALLOWED_ORIGINS=*

# ----------------------------------------------------------------------------
# API Configuration
# ----------------------------------------------------------------------------

# API Base URL (for local development)
API_BASE_URL=http://localhost:8000

# API Version
API_VERSION=1.0.0

# Rate Limiting (requests per minute per user)
RATE_LIMIT_PER_MINUTE=60

# ----------------------------------------------------------------------------
# Recommendation Engine Configuration
# ----------------------------------------------------------------------------

# Default search radius for nearby landmarks (km)
DEFAULT_SEARCH_RADIUS_KM=50.0

# Maximum recommendations to return
MAX_RECOMMENDATIONS=10

# Minimum similarity threshold for recommendations
MIN_SIMILARITY_THRESHOLD=0.3

# Recommendation scoring weights (must sum to 1.0)
SIMILARITY_WEIGHT=0.5
PROXIMITY_WEIGHT=0.25
VISUAL_WEIGHT=0.2
POPULARITY_WEIGHT=0.05

# ----------------------------------------------------------------------------
# Prediction Confidence Thresholds
# ----------------------------------------------------------------------------

# High confidence threshold (above this = direct recommendation)
HIGH_CONFIDENCE_THRESHOLD=0.95
HIGH_CONFIDENCE_GAP=0.3

# Medium confidence threshold (show alternatives)
MEDIUM_CONFIDENCE_THRESHOLD=0.70
MEDIUM_CONFIDENCE_GAP=0.10

# Low confidence threshold (scene-based search)
LOW_CONFIDENCE_THRESHOLD=0.50

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable detailed request logging
LOG_REQUESTS=false

# Enable model performance logging
LOG_PERFORMANCE=true

# ----------------------------------------------------------------------------
# Email Configuration (for password reset - optional)
# ----------------------------------------------------------------------------

# SMTP Server Configuration
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@yourapp.com

# ----------------------------------------------------------------------------
# Development Settings
# ----------------------------------------------------------------------------

# Enable debug mode (never use in production!)
DEBUG=false

# Enable hot reload for local development
RELOAD=true

# Local development port
PORT=8000

# ----------------------------------------------------------------------------
# AWS SAM Deployment Settings
# ----------------------------------------------------------------------------

# Stack name for CloudFormation
STACK_NAME=cv-location-classifier

# S3 bucket for SAM deployment artifacts (auto-created if not specified)
# SAM_BUCKET=cv-classifier-deployment-artifacts

# Enable X-Ray tracing for Lambda
ENABLE_XRAY_TRACING=false

# ----------------------------------------------------------------------------
# Notes
# ----------------------------------------------------------------------------

# 1. Never commit this file with real secrets to git!
#    Copy this file to .env and add .env to .gitignore
#
# 2. For AWS Lambda deployment:
#    - Set environment variables in template.yaml (Parameters section)
#    - Or use AWS Systems Manager Parameter Store for secrets
#
# 3. Generate strong JWT secret:
#    python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 4. Get Hugging Face token:
#    https://huggingface.co/settings/tokens
#
# 5. Cost monitoring:
#    - DynamoDB: Always Free (25GB, 25 RCU/WCU)
#    - Lambda: Always Free (1M requests/month)
#    - API Gateway: Always Free (1M calls/month)
#    - Hugging Face: Free tier (1K requests/month)
